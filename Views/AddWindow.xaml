<Window x:Class="Device_Library_WPF.Views.AddWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d"
        Title="Device Add"
        Height="500" Width="825"
        ResizeMode="NoResize"
        WindowStartupLocation="CenterScreen"
        Background="{StaticResource BgBrush}"
        Foreground="{StaticResource TextBrush}">

    <Grid Margin="{StaticResource P_Window}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="16"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Top bar -->
        <Grid Grid.Row="0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" MinWidth="109"/>
                <ColumnDefinition Width="17"/>
                <ColumnDefinition/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>

            <StackPanel Grid.Column="0">
                <TextBlock Text="Device Library" FontSize="16" FontWeight="SemiBold" Width="109"/>
                <TextBlock Text="by Akairoshi" Opacity="0.85" Margin="0,4,0,0"/>
            </StackPanel>
            <TextBlock Text="Device ADD" FontSize="34" FontWeight="Bold" Grid.Column="2" VerticalAlignment="Center" HorizontalAlignment="Center" FontFamily="Cascadia Code"/>
        </Grid>

        <Border Grid.Row="2" Style="{StaticResource CardContainer}">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="235"/>
                    <ColumnDefinition Width="40"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Left side -->
                <Grid Grid.Column="0" Grid.Row="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <TextBlock Style="{StaticResource HeaderText}" FontSize="18" Text="Preview" />

                    <Border Grid.Row="1"
                    Background="#1AFFFFFF"
                    CornerRadius="{StaticResource R_Card}"
                    BorderBrush="{StaticResource BorderBrushSoft}"
                    BorderThickness="1"
                    Margin="0,10,0,10">
                        <Grid ClipToBounds="True">
                            <Image Source="{Binding DeviceImage}" Stretch="UniformToFill"/>

                            <!-- Placeholder if null -->
                            <TextBlock Text="DeviceImage"
                               HorizontalAlignment="Center"
                               VerticalAlignment="Center"
                               Opacity="0.85">
                                <TextBlock.Style>
                                    <Style TargetType="{x:Type TextBlock}">
                                        <Setter Property="Visibility" Value="Collapsed"/>
                                        <Style.Triggers>
                                            <DataTrigger Binding="{Binding DeviceImage}" Value="{x:Null}">
                                                <Setter Property="Visibility" Value="Visible"/>
                                            </DataTrigger>
                                        </Style.Triggers>
                                    </Style>
                                </TextBlock.Style>
                            </TextBlock>
                        </Grid>
                    </Border>

                    <!-- Image path row -->
                    <StackPanel Grid.Row="2">
                        <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4">
                    <Run Text="Image path:"/>
                        </TextBlock>
                        <DockPanel>
                            <Button Content="..."
                                Width="36"
                                Height="30"
                                DockPanel.Dock="Right"
                                Command="{Binding BrowseImageCommand}"
                                Style="{StaticResource PillButton}"/>

                            <TextBox Text="{Binding ImagePath, UpdateSourceTrigger=PropertyChanged}"
                                 Height="30"
                                 VerticalContentAlignment="Center" Margin="0,0,15,0"/>
                        </DockPanel>
                    </StackPanel>
                </Grid>

                <!-- Right side  -->
                <Grid Grid.Column="2" Grid.Row="0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="44"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <TextBlock Style="{StaticResource HeaderText}" FontSize="20" VerticalAlignment="Center" Grid.Row="1"
                       Text="Add new device" />

                    <ScrollViewer Grid.Row="2"
                          VerticalScrollBarVisibility="Auto"
                          HorizontalScrollBarVisibility="Disabled"
                          Margin="0,10,0,0">
                        <ScrollViewer.Resources>
                            <Style TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource RoundedScrollBar}"/>
                        </ScrollViewer.Resources>

                        <StackPanel>

                            <!-- Basix -->
                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="Manufacturer:"/></TextBlock>
                            <TextBox Text="{Binding Manufacturer, UpdateSourceTrigger=PropertyChanged}" Height="30" Margin="0,0,0,10"
                             VerticalContentAlignment="Center"/>

                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="Model:"/></TextBlock>
                            <TextBox Text="{Binding Model, UpdateSourceTrigger=PropertyChanged}" Height="30" Margin="0,0,0,10"
                             VerticalContentAlignment="Center"/>

                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="Device type:"/></TextBlock>
                            <ComboBox Style="{StaticResource DarkComboBox}" SelectedItem="{Binding Type}" ItemsSource="{Binding DeviceTypes}"
                                      Height="30" Margin="0,0,0,10"/>

                            <!-- Screen -->
                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="Screen:"/></TextBlock>
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="160"/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="160"/>
                                </Grid.ColumnDefinitions>

                                <TextBox Grid.Column="0"
                                 Text="{Binding Resolution, UpdateSourceTrigger=PropertyChanged}"
                                 Height="30" VerticalContentAlignment="Center"
                                 ToolTip="Resolution (p)"/>

                                <ComboBox Grid.Column="2"
                                  Style="{StaticResource DarkComboBox}"
                                  SelectedItem="{Binding DisplayType}"
                                  ItemsSource="{Binding DisplayTypes}"
                                  Height="30"/>

                                <TextBox Grid.Column="4"
                                 Text="{Binding ScreenRefresh, UpdateSourceTrigger=PropertyChanged}"
                                 Height="30" VerticalContentAlignment="Center"
                                 ToolTip="Hz"/>
                            </Grid>

                            <!-- CPU / Charge -->
                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="CPU:"/></TextBlock>
                            <TextBox Text="{Binding Processor, UpdateSourceTrigger=PropertyChanged}" Height="30" Margin="0,0,0,10"
                             VerticalContentAlignment="Center"/>

                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="Charge speed (W):"/></TextBlock>
                            <TextBox Text="{Binding ChargeSpeed, UpdateSourceTrigger=PropertyChanged}" Height="30" Margin="0,0,0,14"
                             VerticalContentAlignment="Center"/>


                            <!--  MemoryConfig editor -->
                            <DockPanel Margin="0,0,0,6">
                                <TextBlock Style="{StaticResource InfoLine}" VerticalAlignment="Center">
                            <Run Text="Memory configs: "/>
                                </TextBlock>

                                <Button DockPanel.Dock="Right"
                                Style="{StaticResource PillButton}"
                                Content="+ Add"
                                Height="30"
                                Command="{Binding AddMemoryCommand}"/>
                            </DockPanel>

                            <ItemsControl ItemsSource="{Binding Memories}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="0,0,0,6">

                                            <Button DockPanel.Dock="Right"
                                            Content="X"
                                            Height="30"
                                            Width="36"
                                            Style="{StaticResource PillButton}"
                                            Command="{Binding DataContext.RemoveMemoryCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"/>
                                            
                                            <TextBox Width="70" Height="30"
                                             VerticalContentAlignment="Center"
                                             Text="{Binding Ram, UpdateSourceTrigger=PropertyChanged}" />

                                            <TextBlock Text=" / " VerticalAlignment="Center" Margin="6,0"/>

                                            <TextBox Width="90" Height="30"
                                             VerticalContentAlignment="Center"
                                             Text="{Binding Rom, UpdateSourceTrigger=PropertyChanged}" />

                                            <TextBlock Text=" GB" VerticalAlignment="Center" Margin="6,0"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <Border Height="1" Margin="0,10,0,10" Background="#1AFFFFFF"/>

                            <!-- Cameras editor -->
                            <DockPanel Margin="0,0,0,6">
                                <TextBlock Style="{StaticResource InfoLine}" VerticalAlignment="Center">
                            <Run Text="Cameras: "/>
                                </TextBlock>

                                <Button DockPanel.Dock="Right"
                                Style="{StaticResource PillButton}"
                                Content="+ Add"
                                Height="30"
                                Command="{Binding AddCameraCommand}"/>
                            </DockPanel>

                            <ItemsControl ItemsSource="{Binding Cameras}">
                                <ItemsControl.ItemTemplate>
                                    <DataTemplate>
                                        <DockPanel Margin="0,0,0,6">

                                            <Button DockPanel.Dock="Right"
                                            Content="X"
                                            Height="30"
                                            Width="36"
                                            Style="{StaticResource PillButton}"
                                            Command="{Binding DataContext.RemoveCameraCommand, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                            CommandParameter="{Binding}"/>

                                            <ComboBox Width="180" Height="30"
                                              Style="{StaticResource DarkComboBox}"
                                              ItemsSource="{Binding DataContext.CameraTypes, RelativeSource={RelativeSource AncestorType=ItemsControl}}"
                                              SelectedItem="{Binding Type}" />

                                            <TextBox Width="80" Height="30" Margin="10,0,0,0"
                                             VerticalContentAlignment="Center"
                                             Text="{Binding Megapixels, UpdateSourceTrigger=PropertyChanged}" />

                                            <TextBlock Text=" mp" VerticalAlignment="Center" Margin="6,0"/>
                                        </DockPanel>
                                    </DataTemplate>
                                </ItemsControl.ItemTemplate>
                            </ItemsControl>

                            <Border Height="1" Margin="0,10,0,10" Background="#1AFFFFFF"/>

                            <!-- OS -->
                            <TextBlock Style="{StaticResource InfoLine}" Margin="0,0,0,4"><Run Text="OS:"/></TextBlock>
                            <Grid Margin="0,0,0,10">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition/>
                                    <ColumnDefinition Width="12"/>
                                    <ColumnDefinition Width="160"/>
                                </Grid.ColumnDefinitions>

                                <TextBox Grid.Column="0"
                                 Text="{Binding OsName, UpdateSourceTrigger=PropertyChanged}"
                                 Height="30" VerticalContentAlignment="Center"/>

                                <TextBox Grid.Column="2"
                                 Text="{Binding OsVersion, UpdateSourceTrigger=PropertyChanged}"
                                 Height="30" VerticalContentAlignment="Center"/>
                            </Grid>

                        </StackPanel>
                    </ScrollViewer>
                </Grid>

                <!-- Bottom controls -->
                <StackPanel Grid.Row="1" Grid.ColumnSpan="3" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                    <Button Style="{StaticResource PillButton}"
                    Content="Cancel"
                    Height="36"
                    Width="120"
                    Margin="0,0,12,0"
                    Command="{Binding CancelCommand}"/>

                    <Button Style="{StaticResource PillButton}"
                    Content="Save"
                    Height="36"
                    Width="140"
                    Command="{Binding SaveCommand}"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</Window>
